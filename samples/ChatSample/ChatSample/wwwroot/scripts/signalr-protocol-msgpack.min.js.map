{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../node_modules/base64-js/index.js","../../node_modules/ieee754/index.js","../../node_modules/buffer/index.js","../../src/BinaryMessageFormat.ts","../../src/MessagePackHubProtocol.ts","../../src/index.ts","../../src/browser-index.ts"],"names":["extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","__rest","e","indexOf","getOwnPropertySymbols","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","apply","__generator","body","_","label","sent","trys","ops","f","y","g","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__exportStar","m","exports","__values","o","__read","ar","error","__spread","concat","__await","__asyncGenerator","asyncIterator","q","a","resume","settle","fulfill","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__esModule","k","default","__importDefault","byteLength_1","byteLength","toByteArray_1","toByteArray","fromByteArray_1","fromByteArray","lookup","revLookup","Arr","Uint8Array","code","len","charCodeAt","placeHoldersCount","b64","Error","l","tmp","placeHolders","arr","L","tripletToBase64","num","encodeChunk","uint8","start","end","output","join","extraBytes","parts","maxChunkLength","len2","read","buffer","offset","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","Infinity","Math","pow","write","rt","abs","isNaN","floor","log","LN2","Buffer","SlowBuffer","INSPECT_MAX_BYTES","K_MAX_LENGTH","kMaxLength","TYPED_ARRAY_SUPPORT","typedArraySupport","console","foo","createBuffer","RangeError","buf","arg","encodingOrOffset","allocUnsafe","from","species","configurable","enumerable","writable","poolSize","isArrayBuffer","fromArrayBuffer","fromString","fromObject","assertSize","size","alloc","fill","encoding","undefined","checked","allocUnsafeSlow","string","isEncoding","actual","slice","fromArrayLike","array","byteOffset","obj","isBuffer","copy","isArrayBufferView","numberIsNaN","type","isArray","data","toString","_isBuffer","compare","x","min","String","toLowerCase","list","pos","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","swap16","swap32","swap64","equals","inspect","str","max","match","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","val","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","j","includes","hexWrite","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","isFinite","toJSON","_arr","base64","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","fromCharCode","ret","out","toHex","bytes","newBuf","subarray","checkOffset","ext","readUIntLE","noAssert","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","ieee754","readFloatBE","readDoubleLE","readDoubleBE","checkInt","writeUIntLE","maxBytes","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","checkIEEE754","writeFloat","littleEndian","writeFloatLE","writeFloatBE","writeDouble","writeDoubleLE","writeDoubleBE","targetStart","set","INVALID_BASE64_RE","base64clean","trim","replace","units","leadSurrogate","byteArray","hi","lo","src","dst","ArrayBuffer","name","isView","BinaryMessageFormat","lenBuffer","sizePart","parse","input","uint8Array","maxLengthPrefixSize","numBitsToShift","numBytes","byteRead","MessagePackHubProtocol","version","transferFormat","signalr_1","Binary","parseMessages","logger","_this","instance","BinaryMessageFormat_1","map","parseMessage","writeMessage","message","Invocation","writeInvocation","StreamInvocation","writeStreamInvocation","StreamItem","Completion","msgpack","msgpack5","properties","decode","buffer_1","messageType","createInvocationMessage","readHeaders","createStreamItemMessage","createCompletionMessage","Ping","createPingMessage","Close","createCloseMessage","Information","headers","invocationId","item","errorResult","voidResult","nonVoidResult","resultKind","completionMessage","invocationMessage","payload","encode","streamInvocationMessage","VERSION","MessagePackHubProtocol_1","tslib_1"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction placeHoldersCount (b64) {\n  var len = b64.length\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n}\n\nfunction byteLength (b64) {\n  // base64 is 4/3 + up to two characters of the original data\n  return (b64.length * 3 / 4) - placeHoldersCount(b64)\n}\n\nfunction toByteArray (b64) {\n  var i, l, tmp, placeHolders, arr\n  var len = b64.length\n  placeHolders = placeHoldersCount(b64)\n\n  arr = new Arr((len * 3 / 4) - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0; i < l; i += 4) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('Invalid typed array length')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\n// Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\nif (typeof Symbol !== 'undefined' && Symbol.species &&\n    Buffer[Symbol.species] === Buffer) {\n  Object.defineProperty(Buffer, Symbol.species, {\n    value: null,\n    configurable: true,\n    enumerable: false,\n    writable: false\n  })\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (isArrayBuffer(value)) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  return fromObject(value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nBuffer.prototype.__proto__ = Uint8Array.prototype\nBuffer.__proto__ = Uint8Array\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj) {\n    if (isArrayBufferView(obj) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n        return createBuffer(0)\n      }\n      return fromArrayLike(obj)\n    }\n\n    if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n      return fromArrayLike(obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (isArrayBufferView(string) || isArrayBuffer(string)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  newBuf.__proto__ = Buffer.prototype\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : new Buffer(val, encoding)\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffers from another context (i.e. an iframe) do not pass the `instanceof` check\n// but they should be treated as valid. See: https://github.com/feross/buffer/issues/166\nfunction isArrayBuffer (obj) {\n  return obj instanceof ArrayBuffer ||\n    (obj != null && obj.constructor != null && obj.constructor.name === 'ArrayBuffer' &&\n      typeof obj.byteLength === 'number')\n}\n\n// Node 0.10 supports `ArrayBuffer` but lacks `ArrayBuffer.isView`\nfunction isArrayBufferView (obj) {\n  return (typeof ArrayBuffer.isView === 'function') && ArrayBuffer.isView(obj)\n}\n\nfunction numberIsNaN (obj) {\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n\r\n// Not exported from index.\r\nexport class BinaryMessageFormat {\r\n\r\n    // The length prefix of binary messages is encoded as VarInt. Read the comment in\r\n    // the BinaryMessageParser.TryParseMessage for details.\r\n\r\n    public static write(output: Uint8Array): ArrayBuffer {\r\n        // msgpack5 uses returns Buffer instead of Uint8Array on IE10 and some other browser\r\n        //  in which case .byteLength does will be undefined\r\n        let size = output.byteLength || output.length;\r\n        const lenBuffer = [];\r\n        do {\r\n            let sizePart = size & 0x7f;\r\n            size = size >> 7;\r\n            if (size > 0) {\r\n                sizePart |= 0x80;\r\n            }\r\n            lenBuffer.push(sizePart);\r\n        }\r\n        while (size > 0);\r\n\r\n        // msgpack5 uses returns Buffer instead of Uint8Array on IE10 and some other browser\r\n        //  in which case .byteLength does will be undefined\r\n        size = output.byteLength || output.length;\r\n\r\n        const buffer = new Uint8Array(lenBuffer.length + size);\r\n        buffer.set(lenBuffer, 0);\r\n        buffer.set(output, lenBuffer.length);\r\n        return buffer.buffer;\r\n    }\r\n\r\n    public static parse(input: ArrayBuffer): Uint8Array[] {\r\n        const result: Uint8Array[] = [];\r\n        const uint8Array = new Uint8Array(input);\r\n        const maxLengthPrefixSize = 5;\r\n        const numBitsToShift = [0, 7, 14, 21, 28 ];\r\n\r\n        for (let offset = 0; offset < input.byteLength;) {\r\n            let numBytes = 0;\r\n            let size = 0;\r\n            let byteRead;\r\n            do {\r\n                byteRead = uint8Array[offset + numBytes];\r\n                size = size | ((byteRead & 0x7f) << (numBitsToShift[numBytes]));\r\n                numBytes++;\r\n            }\r\n            while (numBytes < Math.min(maxLengthPrefixSize, input.byteLength - offset) && (byteRead & 0x80) !== 0);\r\n\r\n            if ((byteRead & 0x80) !== 0 && numBytes < maxLengthPrefixSize) {\r\n                throw new Error(\"Cannot read message size.\");\r\n            }\r\n\r\n            if (numBytes === maxLengthPrefixSize && byteRead > 7) {\r\n                throw new Error(\"Messages bigger than 2GB are not supported.\");\r\n            }\r\n\r\n            if (uint8Array.byteLength >= (offset + numBytes + size)) {\r\n                // IE does not support .slice() so use subarray\r\n                result.push(uint8Array.slice\r\n                    ? uint8Array.slice(offset + numBytes, offset + numBytes + size)\r\n                    : uint8Array.subarray(offset + numBytes, offset + numBytes + size));\r\n            } else {\r\n                throw new Error(\"Incomplete message.\");\r\n            }\r\n\r\n            offset = offset + numBytes + size;\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n\r\nimport { Buffer } from \"buffer\";\r\nimport * as msgpack5 from \"msgpack5\";\r\n\r\nimport { CompletionMessage, HubMessage, IHubProtocol, ILogger, InvocationMessage, LogLevel, MessageHeaders, MessageType, NullLogger, StreamInvocationMessage, StreamItemMessage, TransferFormat } from \"@aspnet/signalr\";\r\n\r\nimport { BinaryMessageFormat } from \"./BinaryMessageFormat\";\r\n\r\n// TypeDoc's @inheritDoc and @link don't work across modules :(\r\n\r\n/** Implements the MessagePack Hub Protocol */\r\nexport class MessagePackHubProtocol implements IHubProtocol {\r\n    /** The name of the protocol. This is used by SignalR to resolve the protocol between the client and server. */\r\n    public readonly name: string = \"messagepack\";\r\n    /** The version of the protocol. */\r\n    public readonly version: number = 1;\r\n    /** The TransferFormat of the protocol. */\r\n    public readonly transferFormat: TransferFormat = TransferFormat.Binary;\r\n\r\n    /** Creates an array of HubMessage objects from the specified serialized representation.\r\n     *\r\n     * @param {ArrayBuffer} input An ArrayBuffer containing the serialized representation.\r\n     * @param {ILogger} logger A logger that will be used to log messages that occur during parsing.\r\n     */\r\n    public parseMessages(input: ArrayBuffer, logger: ILogger): HubMessage[] {\r\n        // The interface does allow \"string\" to be passed in, but this implementation does not. So let's throw a useful error.\r\n        if (!(input instanceof ArrayBuffer)) {\r\n            throw new Error(\"Invalid input for MessagePack hub protocol. Expected an ArrayBuffer.\");\r\n        }\r\n\r\n        if (logger === null) {\r\n            logger = NullLogger.instance;\r\n        }\r\n        return BinaryMessageFormat.parse(input).map((m) => this.parseMessage(m, logger));\r\n    }\r\n\r\n    /** Writes the specified HubMessage to an ArrayBuffer and returns it.\r\n     *\r\n     * @param {HubMessage} message The message to write.\r\n     * @returns {ArrayBuffer} An ArrayBuffer containing the serialized representation of the message.\r\n     */\r\n    public writeMessage(message: HubMessage): ArrayBuffer {\r\n        switch (message.type) {\r\n            case MessageType.Invocation:\r\n                return this.writeInvocation(message as InvocationMessage);\r\n            case MessageType.StreamInvocation:\r\n                return this.writeStreamInvocation(message as StreamInvocationMessage);\r\n            case MessageType.StreamItem:\r\n            case MessageType.Completion:\r\n                throw new Error(`Writing messages of type '${message.type}' is not supported.`);\r\n            default:\r\n                throw new Error(\"Invalid message type.\");\r\n        }\r\n    }\r\n\r\n    private parseMessage(input: Uint8Array, logger: ILogger): HubMessage {\r\n        if (input.length === 0) {\r\n            throw new Error(\"Invalid payload.\");\r\n        }\r\n\r\n        const msgpack = msgpack5();\r\n        const properties = msgpack.decode(new Buffer(input));\r\n        if (properties.length === 0 || !(properties instanceof Array)) {\r\n            throw new Error(\"Invalid payload.\");\r\n        }\r\n\r\n        const messageType = properties[0] as MessageType;\r\n\r\n        switch (messageType) {\r\n            case MessageType.Invocation:\r\n                return this.createInvocationMessage(this.readHeaders(properties), properties);\r\n            case MessageType.StreamItem:\r\n                return this.createStreamItemMessage(this.readHeaders(properties), properties);\r\n            case MessageType.Completion:\r\n                return this.createCompletionMessage(this.readHeaders(properties), properties);\r\n            case MessageType.Ping:\r\n                return this.createPingMessage(properties);\r\n            case MessageType.Close:\r\n                return this.createCloseMessage(properties);\r\n            default:\r\n                // Future protocol changes can add message types, old clients can ignore them\r\n                logger.log(LogLevel.Information, \"Unknown message type '\" + messageType + \"' ignored.\");\r\n                return null;\r\n        }\r\n    }\r\n\r\n    private createCloseMessage(properties: any[]): HubMessage {\r\n        // check minimum length to allow protocol to add items to the end of objects in future releases\r\n        if (properties.length < 2) {\r\n            throw new Error(\"Invalid payload for Close message.\");\r\n        }\r\n\r\n        return {\r\n            // Close messages have no headers.\r\n            error: properties[1],\r\n            type: MessageType.Close,\r\n        } as HubMessage;\r\n    }\r\n\r\n    private createPingMessage(properties: any[]): HubMessage {\r\n        // check minimum length to allow protocol to add items to the end of objects in future releases\r\n        if (properties.length < 1) {\r\n            throw new Error(\"Invalid payload for Ping message.\");\r\n        }\r\n\r\n        return {\r\n            // Ping messages have no headers.\r\n            type: MessageType.Ping,\r\n        } as HubMessage;\r\n    }\r\n\r\n    private createInvocationMessage(headers: MessageHeaders, properties: any[]): InvocationMessage {\r\n        // check minimum length to allow protocol to add items to the end of objects in future releases\r\n        if (properties.length < 5) {\r\n            throw new Error(\"Invalid payload for Invocation message.\");\r\n        }\r\n\r\n        const invocationId = properties[2] as string;\r\n        if (invocationId) {\r\n            return {\r\n                arguments: properties[4],\r\n                headers,\r\n                invocationId,\r\n                target: properties[3] as string,\r\n                type: MessageType.Invocation,\r\n            };\r\n        } else {\r\n            return {\r\n                arguments: properties[4],\r\n                headers,\r\n                target: properties[3],\r\n                type: MessageType.Invocation,\r\n            };\r\n        }\r\n\r\n    }\r\n\r\n    private createStreamItemMessage(headers: MessageHeaders, properties: any[]): StreamItemMessage {\r\n        // check minimum length to allow protocol to add items to the end of objects in future releases\r\n        if (properties.length < 4) {\r\n            throw new Error(\"Invalid payload for StreamItem message.\");\r\n        }\r\n\r\n        return {\r\n            headers,\r\n            invocationId: properties[2],\r\n            item: properties[3],\r\n            type: MessageType.StreamItem,\r\n        } as StreamItemMessage;\r\n    }\r\n\r\n    private createCompletionMessage(headers: MessageHeaders, properties: any[]): CompletionMessage {\r\n        // check minimum length to allow protocol to add items to the end of objects in future releases\r\n        if (properties.length < 4) {\r\n            throw new Error(\"Invalid payload for Completion message.\");\r\n        }\r\n\r\n        const errorResult = 1;\r\n        const voidResult = 2;\r\n        const nonVoidResult = 3;\r\n\r\n        const resultKind = properties[3];\r\n\r\n        if (resultKind !== voidResult && properties.length < 5) {\r\n            throw new Error(\"Invalid payload for Completion message.\");\r\n        }\r\n\r\n        const completionMessage = {\r\n            error: null as string,\r\n            headers,\r\n            invocationId: properties[2],\r\n            result: null as any,\r\n            type: MessageType.Completion,\r\n        };\r\n\r\n        switch (resultKind) {\r\n            case errorResult:\r\n                completionMessage.error = properties[4];\r\n                break;\r\n            case nonVoidResult:\r\n                completionMessage.result = properties[4];\r\n                break;\r\n        }\r\n\r\n        return completionMessage as CompletionMessage;\r\n    }\r\n\r\n    private writeInvocation(invocationMessage: InvocationMessage): ArrayBuffer {\r\n        const msgpack = msgpack5();\r\n        const payload = msgpack.encode([MessageType.Invocation, invocationMessage.headers || {}, invocationMessage.invocationId || null,\r\n        invocationMessage.target, invocationMessage.arguments]);\r\n\r\n        return BinaryMessageFormat.write(payload.slice());\r\n    }\r\n\r\n    private writeStreamInvocation(streamInvocationMessage: StreamInvocationMessage): ArrayBuffer {\r\n        const msgpack = msgpack5();\r\n        const payload = msgpack.encode([MessageType.StreamInvocation, streamInvocationMessage.headers || {}, streamInvocationMessage.invocationId,\r\n        streamInvocationMessage.target, streamInvocationMessage.arguments]);\r\n\r\n        return BinaryMessageFormat.write(payload.slice());\r\n    }\r\n\r\n    private readHeaders(properties: any): MessageHeaders {\r\n        const headers: MessageHeaders = properties[1] as MessageHeaders;\r\n        if (typeof headers !== \"object\") {\r\n            throw new Error(\"Invalid headers.\");\r\n        }\r\n        return headers;\r\n    }\r\n}\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n\r\n// Version token that will be replaced by the prepack command\r\n/** The version of the SignalR Message Pack protocol library. */\r\nexport const VERSION = \"0.0.0-DEV_BUILD\";\r\n\r\nexport { MessagePackHubProtocol } from \"./MessagePackHubProtocol\";\r\n","// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n\r\n// This is where we add any polyfills we'll need for the browser. It is the entry module for browser-specific builds.\r\n\r\nexport * from \"./index\";\r\n"]}